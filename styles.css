:root{
  --bg:#0b1020;
  --fg:#e5e7eb;
  --muted:#94a3b8;
  --brand:#22c55e;
  --card:#111827;
  --shadow: rgba(0,0,0,.35);
  /* 运行时写入 */
  --topbar-h: 56px;
  --bottombar-h: 64px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  color:var(--fg);
  background:linear-gradient(180deg,#0f172a 0%, #0b1020 100%);
}
.topbar{
  position:sticky;top:0;z-index:30;
  display:flex;align-items:center;gap:.5rem;
  padding: .5rem .75rem; backdrop-filter:saturate(1.2) blur(6px);
  background:rgba(15,23,42,.7);
  border-bottom:1px solid rgba(255,255,255,.06)
}
.topbar .app-title{font-size:1.1rem;margin:0}
.topbar .spacer{flex:1}
button{background:#1f2937;color:var(--fg);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:.5rem .75rem}
button:active{transform:scale(.98)}

/* 版本按钮红点提示 */
#btnVersion.has-update{position:relative}
#btnVersion.has-update::after{
  content:'';
  position:absolute; right:-2px; top:-2px; width:10px; height:10px;
  background:#ef4444; border-radius:50%; box-shadow:0 0 0 2px rgba(15,23,42,.85);
}

.content{padding: .75rem; padding-bottom: calc(var(--bottombar-h) + .75rem)}
.note-list{list-style:none; margin:0; padding:0; display:grid; gap:.75rem}
.note-item{background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:.75rem; box-shadow:0 10px 30px var(--shadow)}
.note-item h3{margin:.15rem 0 .25rem 0; font-size:1rem}
.note-item p{margin:.25rem 0; color:var(--muted); line-height:1.5}

/* 上下分栏编辑器布局 */
.editor-split{display:flex; flex-direction:column; gap:.75rem; height:calc(100dvh - var(--topbar-h) - var(--bottombar-h) - env(safe-area-inset-bottom) - 1.5rem)}
.editor-split .panel{background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:.75rem}
.editor-split .output{flex:2; overflow:auto; white-space:pre-wrap; color:var(--muted)}
.editor-split .input{flex:1; display:flex; flex-direction:column; gap:.5rem}
.editor-split .input textarea{flex:1; width:100%; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:#0b1020; color:#e5e7eb; padding:1rem; resize:vertical; font-size:16px; line-height:1.5}
.editor-split .input .actions{display:flex; gap:.75rem; justify-content:flex-end}
.editor-split .input .actions button{min-height:42px; padding:.6rem 1rem; border-radius:12px}

.bottombar{
  position:fixed; bottom:0; left:0; right:0; z-index:40;
  display:flex; gap:.5rem; justify-content:space-around;
  padding: calc(.5rem + env(safe-area-inset-bottom)) .5rem .5rem .5rem; background:rgba(15,23,42,.85); border-top:1px solid rgba(255,255,255,.06);
  backdrop-filter:saturate(1.2) blur(6px);
}

@media (max-width: 420px){
  .topbar{padding:.45rem .5rem}
  .editor-split{gap:.5rem; height:calc(100dvh - 7.8rem - env(safe-area-inset-bottom))}
}

/* Drawers */
.drawer{position:fixed; z-index:50; background:rgba(17,24,39,.98); color:var(--fg); width:80vw; max-width:360px; height:100dvh; box-shadow:0 16px 40px var(--shadow); border:1px solid rgba(255,255,255,.06)}
.drawer-header{display:flex; align-items:center; justify-content:space-between; padding:.75rem; border-bottom:1px solid rgba(255,255,255,.06)}
.menu{list-style:none;margin:0;padding:.25rem .5rem}
.menu li a{display:block; padding:.75rem; color:var(--fg); text-decoration:none; border-radius:10px}
.menu li a:active{background:rgba(255,255,255,.06)}

.drawer-left{left:0; top:0; transform:translateX(-100%)}
.drawer-right{right:0; top:0; transform:translateX(100%)}
.drawer-top{left:0; right:0; top:0; height:50dvh; width:100vw; max-width:none; transform:translateY(-100%)}

.drawer.open{transform:translate(0,0)}
.drawer, .drawer.open{transition:transform 280ms cubic-bezier(.2,.8,.2,1)}

.backdrop{position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter: blur(2px); z-index:45}

/* Edge hit area for gestures */
.edge-left, .edge-right, .edge-top{position:fixed; z-index:10}
.edge-left{left:0; top:0; width:18px; height:100dvh}
.edge-right{right:0; top:0; width:18px; height:100dvh}
.edge-top{left:0; top:0; width:100vw; height:16px}

.btn-close{background:#111827}
.quick-actions{display:flex; gap:.5rem; padding:.75rem}
.quick-actions input{flex:1; padding:.5rem .75rem; border-radius:10px; border:1px solid rgba(255,255,255,.08); background:#0b1224; color:var(--fg)}
